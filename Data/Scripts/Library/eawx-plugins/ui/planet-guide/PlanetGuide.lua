require("deepcore/std/class")
require("eawx-util/StoryUtil")
require("eawx-plugins/ui/planet-guide/GuideFunctions")
CONSTANTS = ModContentLoader.get("GameConstants")

---@class PlanetGuide
PlanetGuide = class()

---@param galactic_conquest GalacticConquest
function PlanetGuide:new(galactic_conquest)
	self.galactic_conquest = galactic_conquest
    self.id = string.lower(GlobalValue.Get("MOD_ID"))

    local plot = Get_Story_Plot("Conquests\\Documentation.xml")
    DebugMessage("PlanetGuide::new -- story plot is %s", tostring(plot))

    local stat_display_click_event = plot.Get_Event("Influence_Doc_Trigger")
    stat_display_click_event.Set_Reward_Parameter(1, self.galactic_conquest.HumanPlayer.Get_Faction_Name())

    ---@private
	self.stat_display_event = plot.Get_Event("Influence_Doc")
    DebugMessage("PlanetGuide::new -- planet guide event is %s", tostring(self.stat_display_event))
end

function PlanetGuide:update()
    DebugMessage("PlanetGuide::update -- update started")
    self.stat_display_event.Clear_Dialog_Text()

    self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_HEADER_INFLUENCE_EFFECTS")
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_BODY_SEPARATOR")
	self.stat_display_event.Add_Dialog_Text(Create_Influence_Entry("AILON",{"Ailon Nova Guards"},{"7+"}))
	self.stat_display_event.Add_Dialog_Text(Create_Influence_Entry("ALARIS",{"Raddaugh Gnasp Fluttercraft"},{"7+"}))
	self.stat_display_event.Add_Dialog_Text(Create_Planet_List({"ANAXES"}) .. ": Can gain Fleet Officer minor heroes (space) from Academy at 4 influence and higher (GAR)")
	self.stat_display_event.Add_Dialog_Text(Create_Influence_Entry("BESPIN",{"Storm Cloud Cars"},{"7+"}))
	self.stat_display_event.Add_Dialog_Text(Create_Planet_List({"CARIDA"}) .. ": Can gain Army Officer minor heroes (ground) from Academy at 4 influence and higher (GAR)")
	self.stat_display_event.Add_Dialog_Text(Create_Influence_Entry("CORELLIA",{"CorSec Trooper"},{"7+"}))
	self.stat_display_event.Add_Dialog_Text(Create_Influence_Entry("CHRISTOPHSIS",{"LR-57 Combat Droids"},{"7+"}))
	self.stat_display_event.Add_Dialog_Text(Create_Influence_Entry("GEONOSIS",{"Kolivex Cruisers"},{"7+"}))
	self.stat_display_event.Add_Dialog_Text(Create_Planet_List({"KAMINO"}) .. ": Can gain Clone Commander minor heroes (ground) from Academy at 4 influence and higher (GAR)")
	self.stat_display_event.Add_Dialog_Text(Create_Influence_Entry("KASHYYYK",{"Raddaugh Gnasp Fluttercraft"},{"7+"}))
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_BODY_INFLUENCE_PLANET_TD_FACTORY")
	self.stat_display_event.Add_Dialog_Text("CIS Factory Worlds: " .. Create_Planet_List({"BALMORRA", "CATO_NEIMOIDIA", "DEKO_NEIMOIDIA", "GEONOSIS", "HYPORI", "ORD_CESTUS", "SKAKO", "TELTI"}))
	self.stat_display_event.Add_Dialog_Text(Create_Influence_Entry("MANDALORE",{"Mandalorian Soldiers and Kom'rk Fighters","Mandalorian Commandos"},{"7+","8+"}))
	self.stat_display_event.Add_Dialog_Text(Create_Influence_Entry("THYRSUS",{"Sun Guard"},{"7+"}))
	self.stat_display_event.Add_Dialog_Text(Create_Influence_Entry("UMBARA", {"Umbaran Support Frigate"}, {"8+"})) --FotR_Enhanced
	
	self.stat_display_event.Add_Dialog_Text("TEXT_NONE")
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_HEADER_INFLUENCE_FIGHTERS")
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_BODY_SEPARATOR")
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_BODY_INFLUENCE_FIGHTERS_GEONOSIS")
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_BODY_INFLUENCE_FIGHTERS_NABOO")
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_BODY_INFLUENCE_FIGHTERS_MANDALORIAN")
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_BODY_INFLUENCE_FIGHTERS_MANDALORIAN_WORLDS")
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_BODY_INFLUENCE_FIGHTERS_UMBARA") --FotR_Enhanced
	self.stat_display_event.Add_Dialog_Text("TEXT_NONE")
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_HEADER_INFLUENCE_LOYALTY")
    self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_BODY_SEPARATOR")
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_BODY_INFLUENCE_LOYALTY_PLANET_GEONOSIS")
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_BODY_INFLUENCE_LOYALTY_PLANET_KASHYYYK")
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_BODY_INFLUENCE_LOYALTY_PLANET_NAL_HUTTA")
	
	self.stat_display_event.Add_Dialog_Text("TEXT_NONE")
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_HEADER_COMPANIES")
	self.stat_display_event.Add_Dialog_Text("TEXT_DOCUMENTATION_BODY_SEPARATOR")
	Create_Corp_Entry(self.stat_display_event,"Aratech Repulsor Company","Aratech_HQ",{"CARIDA"})
	Create_Corp_Entry(self.stat_display_event,"Baktoid Industries","Baktoid_HQ",{"GEONOSIS", "BALMORRA", "CATO_NEIMOIDIA", "DEKO_NEIMOIDIA", "ORD_CESTUS", "SKAKO", "TELTI"})
	Create_Corp_Entry(self.stat_display_event,"Balmorran Arms","Balmorran_Arms_HQ",{"BALMORRA"})
	Create_Corp_Entry(self.stat_display_event,"Bespin Motors","Bespin_Motors_HQ",{"BESPIN"})
	Create_Corp_Entry(self.stat_display_event,"Colicoid Creation Nest","Colicoid_HQ",{"COLLA"})
	Create_Corp_Entry(self.stat_display_event,"Commerce Guild","Commerce_Guild_HQ",{"RAXUS", "MINNTOOINE", "SULLUST", "FELUCIA", "SALEUCAMI", "CASTELL", "KORRIBAN"})
	Create_Corp_Entry(self.stat_display_event,"Corellian Engineering Corporation","CEC_HQ",{"CORELLIA"})
	Create_Corp_Entry(self.stat_display_event,"Cloning Facility","Cloning_HQ",{"ARKANIA", "BYSS", "COLUMUS", "KAMINO", "KHOMM", "WAYLAND", "XUAQUARRES"})
	Create_Corp_Entry(self.stat_display_event,"Damorian Manufacturing Corporation","Damorian_HQ",{"BRENTAAL"})
	Create_Corp_Entry(self.stat_display_event,"Free Dac Engineers","Free_Dac_HQ",{"MINNTOOINE","MON_CALAMARI","PAMMANT"})
	Create_Corp_Entry(self.stat_display_event,"Geonosian Engineers","Geonosian_HQ",{"GEONOSIS"})
	Create_Corp_Entry(self.stat_display_event,"Guarja Shipyards","Guarja_HQ",{"NAL_HUTTA"})
	Create_Corp_Entry(self.stat_display_event,"Haor Chall Engineering","Haor_Chall_HQ",{"CHARROS"})
	Create_Corp_Entry(self.stat_display_event,"Hoersch-Kessel Drive, Inc","Hoersch_Kessel_HQ",{"ORD_TRASI", "MINNTOOINE", "DRUCKENWELL", "BALMORRA"})
	Create_Corp_Entry(self.stat_display_event,"Ikas-Adno","Ikas_Adno_HQ",{"MULATAN"})
	Create_Corp_Entry(self.stat_display_event,"Incom Corporation","Incom_HQ",{"FRESIA","CAL_SETI"})
	Create_Corp_Entry(self.stat_display_event,"Jedi Temple","Jedi_Temple",{"CORUSCANT"})
	Create_Corp_Entry(self.stat_display_event,"Jedi Enclave","Jedi_Enclave",{"ANTAR","BESPIN","BOGDEN","CORELLIA","CULARIN","DEVARON","ILUM","KASHYYYK","OBROA_SKAI", "TYTHON"})
	Create_Corp_Entry(self.stat_display_event,"Kuat Drive Yards","KDY_HQ",{"KUAT", "BALMORRA", "GYNDINE", "JAEMUS", "ROTHANA", "XA_FEL"})
	Create_Corp_Entry(self.stat_display_event,"MandalMotors","Mandal_Motors_HQ",{"MANDALORE"})
	Create_Corp_Entry(self.stat_display_event,"Mekuun Corporation","Mekuun_HQ",{"BELSAVIS","TALHOVI"})
	Create_Corp_Entry(self.stat_display_event,"Officer Academy (Fleet)","Anaxes_War_College",{"ANAXES"})
	Create_Corp_Entry(self.stat_display_event,"Officer Academy (Army)","Carida_Academy",{"CARIDA", "KAMINO"})
	Create_Corp_Entry(self.stat_display_event,"Outland Regions Security Force HQ","ORSF_HQ",{"ERIADU"})
	Create_Corp_Entry(self.stat_display_event,"Rendili StarDrive","Rendili_HQ",{"RENDILI", "SLUIS_VAN", "MON_CALAMARI"})
	Create_Corp_Entry(self.stat_display_event,"Retail Caucus","Retail_Caucus_HQ",{"CHRISTOPHSIS"})
	Create_Corp_Entry(self.stat_display_event,"Rothana Heavy Engineering","Rothana_HQ",{"ROTHANA"})
	Create_Corp_Entry(self.stat_display_event,"SoroSuub","SoroSuub_HQ",{"SULLUST", "BYBLOS", "MECHIS"})
	Create_Corp_Entry(self.stat_display_event,"Tactical Droid Factory","Tactical_Droid_Factory",{"BALMORRA", "CATO_NEIMOIDIA", "DEKO_NEIMOIDIA", "GEONOSIS", "ORD_CESTUS", "SKAKO", "TELTI"})
	Create_Corp_Entry(self.stat_display_event,"Taim & Bak","Taim_Bak_HQ",{"RENDILI", "CHARDAAN"})
	Create_Corp_Entry(self.stat_display_event,"Techno Union","Techno_Union_HQ",{"GEONOSIS", "BALMORRA", "ORD_CESTUS", "TELTI", "FOEROST", "KUAT", "FONDOR", "HYPORI", "METALORN", "MUSTAFAR", "NELVAAN", "SALEUCAMI", "UTAPAU", "VULPTER", "TAR_MORDEN"})
	Create_Corp_Entry(self.stat_display_event,"TransGalMeg","TransGalMeg_HQ",{"FOEROST", "VULPTER", "PAKO_RAMOON"})
	Create_Corp_Entry(self.stat_display_event,"Ubrikkian Industries","Ubrikkian_HQ",{"KUAT", "CHARROS", "KWENN", "UBRIKKIA"})
	Create_Corp_Entry(self.stat_display_event,"Uulshos Manufacturing","Uulshos_HQ",{"ETTI", "ESSION"})

    Story_Event("SHOW_INFLUENCE_DOC")
end